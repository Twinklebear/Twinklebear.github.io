---
layout: page
title: "CS 6960 Spring 2015 - Assignment 1"
description: ""
---
{% include JB/setup %}

<div class="col-lg-6 col-md-6">
	<h3>Analysis of First Run</h3>
	<p>
	I first ran the simulator with a lighter version of the TRaX configuration
	described, running with <code>--num-thread-procs 16 --num-TMs 4 --num-l2s 4</code>
	and ran the 3 sample programs.
	</p>
	<p>
	<b>Hello World</b>
	<br />
	I didn't actually run Hello World with the configuration mentioned above
	since it doesn't do very much computation, the simulator output can
	be found in <a href="/courses/cs6960/asn1/hello_world.txt">hello_world.txt</a>.
	</p>
	<p>
	<b>Gradient</b>
	<br />
	The gradient program took 11668 cycles and executed 371712 instructions. The
	number of cycles doesn't match the total number of instructions executed
	since I ran a multi-thread configuration, thus more than 1 instruction was
	executed per cycle, from the issue statistics for this configuration
	on average 30.3446 threads issued each cycle. Without adding more cores
	to this configuration we could improve performance by adding multiple banks
	to the instruction cache. The issue statistics found that on 68% of cycles
	a thread didn't issue an instruction due to iCache conflicts.
	The full output of the program can be found in
	<a href="/courses/cs6960/asn1/gradient_out.txt">gradient_out.txt</a>.
	</p>
	<p>
	<b>Mandelbrot</b>
	<br />
	The mandelbrot program took 380345 cycles and executed 12126192 instructions. The
	number of cycles is far less than the total number of instructions for the
	same reasons mentioned in the gradient program analysis. On average for the
	Mandelbrot program 30.0643 threads issued an instruction each cycle. Without adding
	more cores to the configuration we could again improve performance by adding multiple
	banks to the iCache (the conflict rate was massive, 84.65%!) and by adding another
	FPMUL unit, as 78.49% of resource conflicts were due to fighting over this unit.
	The full output of the program can be found in
	<a href="/courses/cs6960/asn1/mandelbrot_out.txt">mandelbrot_out.txt</a>.
	</p>

	<h3>Analysis of Run with Multibanked iCache</h3>
	<p>
	Since a lot of cycles seemed to be wasted in the gradient and mandelbrot samples
	dealing with iCache conflicts I decided to do a run with 4 iCache banks to see
	how much it improved performance.
	</p>
	<p>
	<b>Gradient</b>
	<br />
	The gradient program with a 4 banked iCache took 5364 cycles and
	executed 371712 instructions. This a huge improvement over the single
	banked version, taking a bit under half the number of cycles to do the same work.
	Checking the issue statistics we find that 66.0075 threads issued each cycle on
	average, more than double the average without the multibanked iCache.
	The full output of the program can be found in
	<a href="/courses/cs6960/asn1/gradient_out2.txt">gradient_out2.txt</a>.
	</p>
	<p>
	<b>Mandelbrot</b>
	<br />
	The gradient program with a 4 banked iCache took 225748 cycles and
	executed 12126192 instructions. Here we also get a pretty big improvement
	although not quite as significant as the gradient program, with our
	average number of threads issuing each cycle getting up to 50.6006, not
	quite double what we had before. This can be explained by taking a look at
	the module utilization which shows the FPMUL unit at 99.54% utilization
	making it account for 98.288% of resource conflicts.
	The full output of the program can be found in
	<a href="/courses/cs6960/asn1/mandelbrot_out2.txt">mandelbrot_out2.txt</a>.
	</p>
	<p>
	<b>Mandelbrot with 2 FPMUL units per TM</b>
	<br />
	If we add a second FPMUL unit to each thread multiprocessor we can
	complete the program in a mere 119145 cycles with the average number of
	threads issuing each cycle getting bumped way up to 96.0958. The output
	from this run can be found in
	<a href="/courses/cs6960/asn1/mandelbrot_out3.txt">mandelbrot_out3.txt</a>.
	Looking at the module utilization there we may even want another FPMUL unit
	or two along with an extra FPADD unit.
	</p>
</div>

<div class="col-lg-6 col-md-6" style="text-align:center">
	<h4>Output from running gradient and mandelbrot samples</h4>
	<br />
	<img src="/courses/cs6960/asn1/gradient.png" class="img-fluid">
	<br />
	<img src="/courses/cs6960/asn1/mandelbrot.png" class="img-fluid">
</div>

