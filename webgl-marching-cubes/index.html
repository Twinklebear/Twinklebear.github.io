<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
		integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
		crossorigin="anonymous">

	<title>WebGL Marching Cubes</title>
</head>
<body>
	<div class="container mt-4">
		<div class="row">
			<div class="col-12 text-center">
                <h3>WebGL + WebASM Marching Cubes</h3>
				<canvas id="glcanvas" class="img-fluid" width="640" height="480"></canvas>
			</div>
			<div class="mx-auto col-12 col-lg-8 row">
				<div class="col-12 col-lg-6 mb-lg-0 mb-2">
					Volume: <select id="volumeList"></select>
				</div>
				<div class="col-12 col-lg-6 mb-lg-0 mb-2">
					Colormap: <select id="colormapList"></select>
				</div>
				<div class="col-12 mb-lg-2 mb-2 mt-2">
					<label for="isovalue">Isovalue</label>
					<input type="range" class="form-control-range" id="isovalue"
							min="0.0" max="1.0" step="0.01">

					<input type="checkbox" class="form-check-input" id="showVolume">
					<label class="form-check-label" for="showVolume">Show Volume</label>
                    <br />
					<input type="checkbox" class="form-check-input" id="useWebASM">
					<label class="form-check-label" for="useWebASM">Use WebASM</label>
				</div>
				<div class="col-12 mt-0">
                <p id="isosurfaceInfo">Isosurface info:</p>
				</div>
				<div class="col-12 mt-lg-2 mt-0">
					<h4>Controls</h4>
					<p>Desktop: Left-click + drag to rotate, scroll to zoom,
					right-click + drag to pan.
					<br/>
					Touch: One finger drag to rotate, pinch to zoom, two finger drag to pan.
                    </p>
					<p id="loadingText"></p>
					<div class="progress mb-2">
						<div id="loadingProgressBar" class="progress-bar" role="progressbar"
							aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
					</div>

                    <h4>Description</h4>
                    <p>
                    This is a WebGL + WebASM implementation of the classic <a href="https://en.wikipedia.org/wiki/Marching_cubes">Marching Cubes</a>
                    algorithm for extracting <a href="https://en.wikipedia.org/wiki/Isosurface">isosurfaces</a> from 3D volume data.
                    An isosurface is a surface
                    which represents points in the 3D data which all have the same value (e.g., pressure, temperature).
                    Try changing the slider to change the selected isovalue! The isosurface extraction code
                    is implemented in Rust and compiled to WebAssembly to accelerate extraction of the surface. Compared to
                    the pure Javascript version, the WebASM version is 10-20x faster! You can run the Javascript version
                    by unchecking the "Use WebASM" box. The surface is rendered as a triangle mesh and combined with the
                    volume during the volume raycasting step, in a manner roughly similar to shadow mapping.
					<a href="https://github.com/Twinklebear/webgl-marching-cubes">
						Get the code on GitHub!</a>
                    </p>
				</div>
			</div>
		</div>
	</div>
    <script type="text/javascript" src="js/gl-matrix-min.js"></script>
    <script type="text/javascript" src="js/webgl-util.js"></script>
    <script type="text/javascript" src="js/shader-srcs.js"></script>
    <script type="text/javascript" src="js/marching-cubes.js"></script>
    <script type="module" src="js/render.js"></script>
</body>
</html>

